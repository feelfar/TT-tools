# ComfyUI 插件使用说明

## TT img enc/dec 插件

这是一个ComfyUI插件，用于在图片中隐藏和提取文件数据。

## 解码节点使用指南

### 节点位置
在ComfyUI中，TT img dec节点位于 `TT Tools` 分类下。

### 输入参数
- **image**: 要解码的图片（从TT img enc节点输出）
- **output_filename**: 输出文件名（可选，默认为"extracted_file"）

### 输出参数
- **状态**: 提取状态信息（成功/失败）

### 使用步骤
1. 将TT img enc节点生成的图片连接到TT img dec节点的image输入
2. 设置输出文件名（可选）
3. 运行工作流
4. 查看控制台输出，确认提取状态和文件路径
5. 文件会自动保存到ComfyUI默认output目录

### 常见问题排查

#### 问题：没有在ComfyUI output目录中看到输出文件

**解决方案：**
1. **检查控制台输出**
   - 在ComfyUI控制台中查看是否有错误信息
   - 确认是否显示"✓ 文件已成功保存到: [路径]"

2. **检查ComfyUI output目录**
   - 解码节点会显示使用的ComfyUI output目录
   - 查看"使用ComfyUI output目录: [绝对路径]"信息

3. **检查ComfyUI界面**
   - 在ComfyUI界面中查看output目录
   - 文件应该与其他生成的图片在同一位置

4. **检查文件权限**
   - 确保ComfyUI有写入权限
   - 尝试以管理员身份运行ComfyUI

#### 问题：提取失败

**可能原因：**
1. 图片不是由TT img enc节点生成
2. 图片格式不正确（需要3通道RGB）
3. 图片被损坏或修改
4. 图片没有包含隐藏数据

**解决方案：**
1. 确认图片来源
2. 检查图片格式
3. 重新生成编码图片
4. 查看详细错误信息

### 调试信息

解码节点会输出详细的调试信息：
- 图片尺寸
- 数据提取过程
- 文件保存状态
- 输出目录路径
- **文件路径信息**（运行完成后自动显示）

### 输出文件位置

文件会自动保存到ComfyUI的默认output目录：
- 通常位于 `ComfyUI/output/` 目录
- 与其他ComfyUI生成的图片保存在同一位置
- 可以通过ComfyUI界面直接查看和下载

### 文件路径显示

运行完成后，解码节点会在命令行中自动显示以下信息：
```
🎉 文件提取完成！
📁 文件路径: C:\path\to\ComfyUI\output\extracted_file.mp4
📄 文件名: extracted_file.mp4
📊 文件大小: 1234567 字节
📂 保存目录: C:\path\to\ComfyUI\output
🔗 完整路径: output\extracted_file.mp4
```

这样您就可以直接复制文件路径，快速找到提取的文件。

### 示例工作流

```
[图片输入] → [TT img enc] → [TT img dec] → [输出文件]
```

### 注意事项

1. **水印兼容性**: 节点自动跳过左上角50像素水印区域
2. **文件格式**: 支持MP4、JPG等多种格式
3. **文件大小**: 根据图片尺寸限制文件大小
4. **错误处理**: 详细的错误信息帮助排查问题

### 技术支持

如果遇到问题，请：
1. 查看ComfyUI控制台输出
2. 检查输出目录路径
3. 确认图片格式和来源
4. 参考详细错误信息
